# wasmå’ŒåŸç”Ÿjså¯¹æ¯”

åŸºäºæ­¤[ä»“åº“](https://github.com/module-federation/module-federation-examples)

## æœ€æ–°æ¯”è¾ƒ

### ç”Ÿå‘½æ¸¸æˆ

`Rust`ä¼˜åŒ–åé€Ÿåº¦å¥‡å¿«ï¼Œæˆ‘æ„¿å¹çˆ†ï¼ï¼ï¼

<img width="1492" alt="æˆªå±2021-08-15 ä¸Šåˆ12 55 55" src="https://user-images.githubusercontent.com/18475942/129453662-41903e40-3ef2-4c88-820c-8fab4618de5b.png"><img width="472" alt="æˆªå±2021-08-11 ä¸‹åˆ11 27 41" src="https://user-images.githubusercontent.com/18475942/129058708-9b4696c7-100c-4ff6-88d3-1eb6c0e5d5f5.png">

æ–‡ç« åœ°å€: [è¿™é‡Œ](https://rustwasm.github.io/docs/book/game-of-life/time-profiling.html)

### dijkstraç®—æ³•

<img width="447" alt="æˆªå±2021-08-15 ä¸Šåˆ12 52 52" src="https://user-images.githubusercontent.com/18475942/129453566-c2e56857-b13e-45be-9bd2-cfa01932ca49.png">

è¿™ä¸ªç®—æ³•(`dijkstra`)åœ¨æµ‹è¯•çš„æ—¶å€™é‡åˆ°ä¸€ä¸ªè¯¡å¼‚çš„ç°è±¡ï¼š
1. ä¸å¼€æ§åˆ¶å°ï¼Œwasmç•¥å¿«äºjs
2. å¼€æ§åˆ¶å°ï¼Œwasmæ¯”jsæ…¢å‡ å€çš„é€Ÿé€Ÿ

å¾…è§£å†³è¿™ä¸ªé—®é¢˜ğŸ¤”(èŠ‚ç‚¹æ•° 1000)


## <del>è®¡ç®—ä¸‹ä¸€ä¸ªtickçš„è€—æ—¶</del>

<img width="1675" alt="æˆªå±2021-07-31 ä¸‹åˆ4 38 33" src="https://user-images.githubusercontent.com/18475942/127734312-988c9a50-7ef9-446f-970c-89d6c7156f78.png">

## <del>ç»“æœ</del>

`JavaScript` > `Wasm-Pack`

åŸç”Ÿ`js`è¿è¡Œé€Ÿåº¦å¤§æ¦‚æ˜¯`wasm`æ¨¡å—çš„1.3å€(æ—¶é—´çº¦å°‘`30%`)

**æ·±å±‚æ¬¡åŸå› **: V8ä¼šå¯¹å¾ªç¯åšä¼˜åŒ–(`ignition -> turbo fan`)ï¼Œæ‰€ä»¥è¦æ¯”è¾ƒä¸€äº›ä¸èƒ½è¢«`turbo fan`ä¼˜åŒ–çš„ä»£ç ç»“æ„ï¼Œå¯èƒ½æ›´å‡†ã€‚

## è¿è¡Œæ–¹å¼

`wasm-pack build ./packages/remote-wasm`

`yarn & yarn start`

## ç»“æ„

```
===========App==================
========/======\================
===wasm========life_game.js=====
====|================|==========
=remote============local========
==\==================\==========
=module federation====pure js===
======/=========================
==rust==========================
=====\==========================
====wasm-pack===================
```

## æµ‹è¯•è¿›ç¨‹

- 20210811 å‘ç°äº†ä¸€å†Œå®è—[å¼€æºä¹¦](https://rustwasm.github.io/docs/book/)ã€‚åŸºäºè¿™ç¯‡æ–‡ç« ä¼˜åŒ–å`Rust`éå¸¸å¿«ï¼ï¼ï¼ï¼

- 20210803æµ‹è¯•äº†å¼•å…¥`js-sys`åï¼Œä½¿ç”¨`Date.now`æ¥è®¡ç®—æ—¶é—´ï¼Œè¿™ä¸ªä¹Ÿä¸ç†æƒ³ã€‚è¿˜ä¸å¦‚ä¸è®¡ç®—ã€‚å¦å¤–å°±æ˜¯`std::time::SystemTime`è¿™ä¸ªåº“å¥½åƒä¸è¢«æ”¯æŒï¼Œä¸€ä½¿ç”¨å°±`unreachable`ã€‚ç„¶ååœ¨ä¸€ä¸ªç¾¤é‡Œé—®äº†å¤§å®¶ï¼Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆå¥½çš„æ€§èƒ½ä¼˜åŒ–ç»“æœã€‚æš‚æ—¶åˆææµ…å§ã€‚ç»§ç»­çœ‹æœ‰æ²¡æœ‰åº“èƒ½å¤Ÿè¶…è¿‡`js`æ€§èƒ½çš„
